<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    
    <!-- SEO Meta Tags -->
    <title>ReflexFlow â€“ Stop Gagging in 21 Days</title>
    <meta name="description" content="A science-backed approach to reducing gag reflex sensitivity. Transform your oral confidence in just 21 days." />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="ReflexFlow â€“ Stop Gagging in 21 Days" />
    <meta property="og:description" content="A science-backed approach to reducing gag reflex sensitivity. Master your comfort in 21 days." />
    
    <!-- Apple-specific meta tags -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="ReflexFlow" />
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    
    <!-- Preconnect to external domains for better performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Allura&display=swap" rel="stylesheet" />
    
    <!-- COMPREHENSIVE PIXEL DEBUGGER -->
    <script>
      console.log('%câ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”', 'color: #4267B2; font-weight: bold;');
      console.log('%c   FACEBOOK PIXEL DEBUGGER ACTIVE', 'background: #4267B2; color: white; padding: 10px; font-size: 16px; font-weight: bold;');
      console.log('%câ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”', 'color: #4267B2; font-weight: bold;');
      
      // Track all network requests
      const originalFetch = window.fetch;
      window.fetch = function(...args) {
        const url = args[0];
        if (url && (url.includes('facebook') || url.includes('fbcdn'))) {
          console.log('ğŸ“¡ FETCH REQUEST TO FACEBOOK:', url);
        }
        return originalFetch.apply(this, args);
      };
      
      // Track all XHR requests
      const originalOpen = XMLHttpRequest.prototype.open;
      XMLHttpRequest.prototype.open = function(method, url) {
        if (url && (url.includes('facebook') || url.includes('fbcdn'))) {
          console.log('ğŸ“¡ XHR REQUEST TO FACEBOOK:', method, url);
        }
        return originalOpen.apply(this, arguments);
      };
      
      // Monitor script loading
      const originalCreateElement = document.createElement;
      document.createElement = function(tagName) {
        const element = originalCreateElement.call(document, tagName);
        if (tagName.toLowerCase() === 'script') {
          const originalSetAttribute = element.setAttribute.bind(element);
          element.setAttribute = function(name, value) {
            if (name === 'src' && value && (value.includes('facebook') || value.includes('fbevents'))) {
              console.log('ğŸ“œ SCRIPT TAG CREATED FOR:', value);
              element.addEventListener('load', () => {
                console.log('âœ… SCRIPT LOADED:', value);
              });
              element.addEventListener('error', (e) => {
                console.error('âŒ SCRIPT FAILED TO LOAD:', value, e);
              });
            }
            return originalSetAttribute(name, value);
          };
        }
        return element;
      };
    </script>
    
    <!-- Facebook Pixel Code -->
    <script>
      console.log('ğŸ”§ Starting Facebook Pixel initialization...');
      
      !function(f,b,e,v,n,t,s)
      {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
      n.callMethod.apply(n,arguments):n.queue.push(arguments)};
      if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
      n.queue=[];t=b.createElement(e);t.async=!0;
      t.src=v;s=b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t,s)}(window, document,'script',
      'https://connect.facebook.net/en_US/fbevents.js');
      
      console.log('ğŸ”§ Pixel base code executed');
      console.log('ğŸ”§ fbq function created:', typeof window.fbq);
      
      fbq('init', '876316645261417');
      console.log('âœ… Pixel initialized with ID: 876316645261417');
      
      fbq('track', 'PageView');
      console.log('ğŸ“Š PageView event tracked');
      
      // Wait for script to fully load
      setTimeout(function() {
        console.log('%câ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”', 'color: #00C853; font-weight: bold;');
        console.log('%c   PIXEL STATUS CHECK (2 seconds after load)', 'background: #00C853; color: white; padding: 10px; font-size: 14px;');
        console.log('%câ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”', 'color: #00C853; font-weight: bold;');
        console.log('âœ… fbq exists:', typeof window.fbq === 'function');
        console.log('âœ… fbq.loaded:', window.fbq ? window.fbq.loaded : 'N/A');
        console.log('âœ… fbq.version:', window.fbq ? window.fbq.version : 'N/A');
        console.log('âœ… fbq.queue length:', window.fbq && window.fbq.queue ? window.fbq.queue.length : 'N/A');
        
        // Check if script loaded
        const fbScript = document.querySelector('script[src*="fbevents.js"]');
        console.log('âœ… Script element found:', !!fbScript);
        
        // Check for any console errors
        console.log('%câ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”', 'color: #FFA000; font-weight: bold;');
        console.log('%c   LOOK FOR NETWORK REQUESTS', 'background: #FFA000; color: white; padding: 10px; font-size: 14px;');
        console.log('%câ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”', 'color: #FFA000; font-weight: bold;');
        console.log('âš ï¸  Open DevTools Network tab and filter by "facebook"');
        console.log('âš ï¸  You should see requests to facebook.com/tr/');
        console.log('âš ï¸  If you DON\'T see any requests, Facebook Pixel is being BLOCKED');
      }, 2000);
    </script>
    <noscript>
      <img height="1" width="1" style="display:none"
           src="https://www.facebook.com/tr?id=876316645261417&ev=PageView&noscript=1"/>
    </noscript>
    <!-- End Facebook Pixel Code -->
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
    
    <!-- Additional debugging after React loads -->
    <script>
      window.addEventListener('load', function() {
        console.log('%câ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”', 'color: #9C27B0; font-weight: bold;');
        console.log('%c   PAGE FULLY LOADED', 'background: #9C27B0; color: white; padding: 10px; font-size: 14px;');
        console.log('%câ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”', 'color: #9C27B0; font-weight: bold;');
        console.log('Pixel still available:', typeof window.fbq === 'function');
      });
    </script>
  </body>
</html>